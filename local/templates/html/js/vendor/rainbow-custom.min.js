!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Rainbow=t()}(this,function(){"use strict";function i(){return"undefined"!=typeof module&&"object"==typeof module.exports}function d(e){var t=e.getAttribute("data-language")||e.parentNode.getAttribute("data-language");if(!t){var n=/\blang(?:uage)?-(\w+)/,a=e.className.match(n)||e.parentNode.className.match(n);a&&(t=a[1])}return t?t.toLowerCase():null}function x(e,t,n,a){return(n!==e||a!==t)&&n<=e&&t<=a}function s(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&(?![\w\#]+;)/g,"&amp;")}function N(e,t){for(var n=0,a=1;a<t;++a)e[a]&&(n+=e[a].length);return n}function L(e,t,n,a){return e<=n&&n<t||e<a&&a<t}function k(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort(function(e,t){return t-e})}function E(e,t,n,a){var r=a.substr(e);return a.substr(0,e)+r.replace(t,n)}function e(e){function t(){self.postMessage({id:n.id,lang:n.lang,result:a})}var n=e.data,a=new o(n.options).refract(n.code,n.lang);return n.isNode?(t(),void self.close()):void setTimeout(function(){t()},1e3*n.options.delay)}function t(){return!v&&null!==y||(y=function(e,t){if(i())return global.Worker=require("webworker-threads").Worker,new Worker(__filename);var n=t.toString(),a=k.toString();a+=s.toString(),a+=x.toString(),a+=L.toString(),a+=E.toString(),a+=N.toString();var r=(a+=n)+"\tthis.onmessage="+e.toString(),o=new Blob([r],{type:"text/javascript"});return new Worker((window.URL||window.webkitURL).createObjectURL(o))}(e,o)),y}function p(n,a){var r=t();r.addEventListener("message",function e(t){t.data.id===n.id&&(a(t.data),r.removeEventListener("message",e))}),r.postMessage(n)}function f(t,n,a){return function(e){t.innerHTML=e.result,t.classList.remove("loading"),t.classList.add("rainbow-show"),"PRE"===t.parentNode.tagName&&(t.parentNode.classList.remove("loading"),t.parentNode.classList.add("rainbow-show")),r&&r(t,e.lang),0==--n.c&&a()}}function m(e,t){var n,a={};return"object"==typeof t&&(t=(a=t).language),t=u[t]||t,{id:g++,code:e,lang:t,options:{patterns:c,inheritenceMap:l,aliases:u,globalClass:(n=a).globalClass,delay:isNaN(n.delay)?0:n.delay},isNode:v}}function h(e){var t=document.createElement("div");t.className="preloader";for(var n=0;n<7;n++)t.appendChild(document.createElement("div"));e.appendChild(t)}function a(e,t){t=t||function(){};for(var n=(e=e&&"function"==typeof e.getElementsByTagName?e:document).getElementsByTagName("pre"),a=e.getElementsByTagName("code"),r=[],o=[],i=0,s=n;i<s.length;i+=1){var c=s[i];h(c),c.getElementsByTagName("code").length?c.getAttribute("data-trimmed")||(c.setAttribute("data-trimmed",!0),c.innerHTML=c.innerHTML.trim()):r.push(c)}for(var l=0,u=a;l<u.length;l+=1){var g=u[l];o.push(g)}!function(e,t){for(var n={c:0},a=0,r=e;a<r.length;a+=1){var o=r[a],i=d(o);if(!o.classList.contains("rainbow")&&i){o.classList.add("loading"),o.classList.add("rainbow"),"PRE"===o.parentNode.tagName&&o.parentNode.classList.add("loading");var s=o.getAttribute("data-global-class"),c=parseInt(o.getAttribute("data-delay"),10);++n.c,p(m(o.innerHTML,{language:i,globalClass:s,delay:c}),f(o,n,t))}}0===n.c&&t()}(o.concat(r),t)}var r,o=function m(h){function v(e,t){var n=e.replace(/\./g," "),a=h.globalClass;return a&&(n+=" "+a),'<span class="'+n+'">'+t+"</span>"}function i(s,e,t){function n(a){var e=c[a];if(e){var t=s.matches[a],n=t.language,r=t.name&&t.matches?t.matches:t,o=function(e,t,n){u=E(N(c,a),e,n?v(n,t):t,u)};if("string"==typeof t)return void o(e,e,t);var i=new m(h);if(n)return void o(e,i.refract(e,n));o(e,i.refract(e,b,r.length?r:[r]),t.matches?t.name:0)}}void 0===t&&(t=0);var a=s.pattern;if(!a)return!1;var r,o,i=!a.global;o="",(r=a).ignoreCase&&(o+="i"),r.multiline&&(o+="m");var c=(a=new RegExp(r.source,o)).exec(e);if(!c)return!1;!s.name&&s.matches&&"string"==typeof s.matches[0]&&(s.name=s.matches[0],delete s.matches[0]);var l,u=c[0],g=c.index+t,d=c[0].length+g;if(g===d)return!1;if(function(e,t){for(var n in w)if(x(n=parseInt(n,10),w[n],e,t)&&(delete w[n],delete y[n]),L(n,w[n],e,t))return 1}(g,d))return{remaining:e.substr(d-t),offset:d};for(var p=0,f=k(s.matches);p<f.length;p+=1){n(f[p])}return l=u,s.name&&(l=v(s.name,l)),y[g]={replace:c[0],with:l},w[g]=d,!i&&{remaining:e.substr(d-t),offset:d}}function a(e,t){for(var n=0,a=t;n<a.length;n+=1)for(var r=a[n],o=i(r,e);o;)o=i(r,o.remaining,o.offset);return function(e){for(var t=0,n=k(y);t<n.length;t+=1){var a=n[t],r=y[a];e=E(a,r.replace,r.with,e)}return e}(e)}var b,y={},w={};this.refract=function(e,t,n){return b=t,n=n||function(e){for(var t=h.patterns[e]||[];h.inheritenceMap[e];)e=h.inheritenceMap[e],t=t.concat(h.patterns[e]||[]);return t}(t),a(s(e),n)}},c={},l={},u={},n={},g=0,v=i(),b="undefined"==typeof document&&"undefined"!=typeof self,y=null;return n={extend:function(e,t,n){l[e]||(l[e]=n),c[e]=t.concat(c[e]||[])},remove:function(e){delete l[e],delete c[e]},onHighlight:function(e){r=e},addAlias:function(e,t){u[e]=t},color:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n;if("string"!=typeof e[0])return"function"==typeof e[0]?void a(0,e[0]):void a(e[0],e[1]);p(m(e[0],e[1]),(n=e[2],function(e){n&&n(e.result,e.lang)}))}},v&&(n.colorSync=function(e,t){var n=m(e,t);return new o(n.options).refract(n.code,n.lang)}),v||b||document.addEventListener("DOMContentLoaded",function(e){n.defer||n.color(e)},!1),b&&(self.onmessage=e),n}),Rainbow.extend("generic",[{matches:{1:[{name:"keyword.operator",pattern:/\=|\+/g},{name:"keyword.dot",pattern:/\./g}],2:{name:"string",matches:{name:"constant.character.escape",pattern:/\\('|"){1}/g}}},pattern:/(\(|\s|\[|\=|:|\+|\.|\{|,)(('|")([^\\\1]|\\.)*?(\3))/gm},{name:"comment",pattern:/\/\*[\s\S]*?\*\/|(\/\/|\#)(?!.*('|").*?[^:](\/\/|\#)).*?$/gm},{name:"constant.numeric",pattern:/\b(\d+(\.\d+)?(e(\+|\-)?\d+)?(f|d)?|0x[\da-f]+)\b/gi},{matches:{1:"keyword"},pattern:/\b(and|array|as|b(ool(ean)?|reak)|c(ase|atch|har|lass|on(st|tinue))|d(ef|elete|o(uble)?)|e(cho|lse(if)?|xit|xtends|xcept)|f(inally|loat|or(each)?|unction)|global|if|import|int(eger)?|long|new|object|or|pr(int|ivate|otected)|public|return|self|st(ring|ruct|atic)|switch|th(en|is|row)|try|(un)?signed|var|void|while)(?=\b)/gi},{name:"constant.language",pattern:/true|false|null/g},{name:"keyword.operator",pattern:/\+|\!|\-|&(gt|lt|amp);|\||\*|\=/g},{matches:{1:"function.call"},pattern:/(\w+?)(?=\()/g},{matches:{1:"storage.function",2:"entity.name.function"},pattern:/(function)\s(.*?)(?=\()/g}]),Rainbow.extend("javascript",[{name:"selector",pattern:/\$(?=\.|\()/g},{name:"support",pattern:/\b(window|document)\b/g},{name:"keyword",pattern:/\b(export|default|from)\b/g},{name:"function.call",pattern:/\b(then)(?=\()/g},{name:"variable.language.this",pattern:/\bthis\b/g},{name:"variable.language.super",pattern:/super(?=\.|\()/g},{name:"storage.type",pattern:/\b(const|let|var)(?=\s)/g},{matches:{1:"support.property"},pattern:/\.(length|node(Name|Value))\b/g},{matches:{1:"support.function"},pattern:/(setTimeout|setInterval)(?=\()/g},{matches:{1:"support.method"},pattern:/\.(getAttribute|replace|push|getElementById|getElementsByClassName|setTimeout|setInterval)(?=\()/g},{name:"string.regexp",matches:{1:"string.regexp.open",2:{name:"constant.regexp.escape",pattern:/\\(.){1}/g},3:"string.regexp.close",4:"string.regexp.modifier"},pattern:/(\/)((?![*+?])(?:[^\r\n\[\/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])+)(\/)(?!\/)([igm]{0,3})/g},{matches:{1:"storage.type",3:"entity.function"},pattern:/(var)?(\s|^)(\S+)(?=\s?=\s?function\()/g},{matches:{1:"keyword",2:"variable.type"},pattern:/(new)\s+(?!Promise)([^\(]*)(?=\()/g},{name:"entity.function",pattern:/(\w+)(?=:\s{0,}function)/g},{name:"constant.other",pattern:/\*(?= as)/g},{matches:{1:"keyword",2:"constant.other"},pattern:/(export)\s+(\*)/g},{matches:{1:"storage.type.accessor",2:"entity.name.function"},pattern:/(get|set)\s+(\w+)(?=\()/g},{matches:{2:"entity.name.function"},pattern:/(^\s*)(\w+)(?=\([^\)]*?\)\s*\{)/gm},{matches:{1:"storage.type.class",2:"entity.name.class",3:"storage.modifier.extends",4:"entity.other.inherited-class"},pattern:/(class)\s+(\w+)(?:\s+(extends)\s+(\w+))?(?=\s*\{)/g},{name:"storage.type.function.arrow",pattern:/=&gt;/g},{name:"support.class.promise",pattern:/\bPromise(?=(\(|\.))/g}],"generic"),Rainbow.addAlias("js","javascript");